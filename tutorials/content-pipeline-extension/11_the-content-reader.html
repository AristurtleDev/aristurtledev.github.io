<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="The ContentTypeReader class | MonoGame Content Pipeline Extension Tutorial Series | Aristurtle ">

    <!-- HTML Meta Tags -->
    <title>The ContentTypeReader class | MonoGame Content Pipeline Extension Tutorial Series | Aristurtle </title>
    <meta name="description" content="Let&#39;s take a look at the ContentTypeReader class.">

    <!-- Facebook Meta Tags -->
    <meta name="og:url" content="https://aristurtle.net/tutorials/content-pipeline-extension/11_the-content-reader.html"><meta name="og:type" content="website">
    <meta name="og:title" content="The ContentTypeReader class | MonoGame Content Pipeline Extension Tutorial Series | Aristurtle ">
    <meta name="og:description" content="Let&#39;s take a look at the ContentTypeReader class.">
    <meta name="og:image" content="https://aristurtle.net/images/aristurtle.png">

    <!-- Twtiter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="aristurtle.net">
    <meta property="twitter:url" content="https://aristurtle.net/tutorials/content-pipeline-extension/11_the-content-reader.html">
    <meta name="twitter:title" content="The ContentTypeReader class | MonoGame Content Pipeline Extension Tutorial Series | Aristurtle ">
    <meta name="twitter:description" content="Let&#39;s take a look at the ContentTypeReader class.">
    <meta name="twitter:image" content="https://aristurtle.net/images/aristurtle.png">

    <!-- Discord Meta Tags -->
    <meta name="theme-color" content="#49c961">

      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.json">
      <meta name="docfx:tocrel" content="toc.json">
      
      
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

    <!-- Matomo -->
    <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="//matomo.aristurtle.net/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '1']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
    </script>
    <!-- End Matomo Code -->

  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../images/logo.svg" alt="Aristurtle">
            Aristurtle
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="the-contenttypereader">The ContentTypeReader</h1>

<p>The job of the <code>ContentTypeReader</code> is to read the contents of an <code>.xnb</code> file and return back the expected type instantiated from the data that is read.</p>
<h2 id="the-anatomy-of-a-contenttypereader">The Anatomy of a <code>ContentTypeReader</code></h2>
<p>On the previous page, we had to manually create the <code>JsonContentTypeReader</code> class and add it to our project.  The code that was given for it is just a base template that can be used to get one started.  Below you can find the code again.</p>
<pre><code class="lang-cs">using Microsoft.Xna.Framework.Content;
using System;

namespace JsonContentPipeline
{
    public class JsonContentTypeReader&lt;T&gt; : ContentTypeReader&lt;T&gt;
    {
        protected override T Read(ContentReader input, T existingInstance)
        {
            return default(T);
        }
    }
}
</code></pre>
<p>This is the basic foundation of a <code>ContentTypeReader</code>.  So let's break it down into specific parts, discuss what they are, and why they matter.</p>
<h3 id="the-contenttypereader-declaration">The <code>ContentTypeReader</code> Declaration</h3>
<p>First is the declaration of the class itself</p>
<pre><code class="lang-cs">public class JsonContentTypeReader : ContentTypeReader&lt;T&gt;
</code></pre>
<p>From this we can see that we are inheriting from the <code>ContentTypeReader&lt;T&gt;</code> class.  This based class comes from the <code>Microsoft.Xna.Framework.Content</code> namespace.  It requires one generic <code>T</code> type that specifies the type this reader is expected to return back.</p>
<h3 id="the-readcontentreader-t-method">The <code>Read(ContentReader, T)</code> Method</h3>
<p>This is the method that is responsible for the actual reading of the <code>.xnb</code> file adn using the data read to construct the type instance that we are expected to return back.  The method has two parameters.</p>
<p>The first parameter is the <code>ContentReader reader</code> parameter. This supplies us with an instance of the <code>ContentReader</code> class, which is just a derived class from <code>BinaryReader</code> that contains some additional overloads to read MonoGame specific types as well.</p>
<p>The second parameter is the <code>T existingInstance</code> parameter.  This will contain an existing instance of the content that is being loaded if it was loaded previously before.  The <code>ContentManager</code> caches the content that is loaded, so we can check here if there is already an existing instance and just return that back if we want instead of rereading the entire <code>.xnb</code> file again.</p>
<h2 id="next-steps">Next Steps</h2>
<p>On the next page, we'll edit the <code>JsonContentTypeReader</code> class that we created and went over so that it performs all the logic necessary to read the content of hte <code>.xnb</code> file and return the expected result.</p>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

        <div id="modificationDate" class="my-5">
          <div class="row">
            <div class="col"></div>
            <div class="col text-end">
              <em><small>Last updated on 10/16/2023 by Christopher Whitley
            </small></em></div>
          </div>
        </div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © 2023 Christopher Whitley
        </div>
      </div>
    </footer>
    <script type="text/javascript" src="/public/questionAnswer.js"></script>
  </body>
</html>
